#include <iostream>
#include <string>
void lps(std::string pattern, int lpsArr[]) {
int length = 0;
lpsArr[0] = 0;
int i = 1;
std::cout << "\nLPS Table Construction:\n";
std::cout << "i\tchar\tLPS[i]\n";
std::cout << "0\t" << pattern[0] << "\t" << lpsArr[0] << "\n";
while (i < pattern.length()) {
if (pattern[i] == pattern[length]) {
length++;
lpsArr[i] = length;
std::cout << i << "\t" << pattern[i] << "\t" << lpsArr[i] << "\n";
i++;
} else {
if (length != 0) {
length = lpsArr[length - 1];
} else {
lpsArr[i] = 0;
std::cout << i << "\t" << pattern[i] << "\t" << lpsArr[i] <<
"\n";
i++;
}
}
}
std::cout << "Final LPS Array: ";
for (int j = 0; j < pattern.length(); j++) std::cout << lpsArr[j] << " ";
std::cout << "\n\n";
}
void kmp(std::string text, std::string pattern) {
int n = text.length();
int m = pattern.length();
int lpsArr[m];
lps(pattern, lpsArr);
int i = 0;
int j = 0;
std::cout << "KMP Search Steps:\n";
while (i < n) {
if (pattern[j] == text[i]) {
std::cout << "Match at text[" << i << "] and pattern[" << j << "] -> 
'" << text[i] << "'\n";
i++;
j++;
}
if (j == m) {
std::cout << "Pattern found at index " << i - j << "\n\n";
j = lpsArr[j - 1];
} else if (i < n && pattern[j] != text[i]) {
if (j != 0) {
j = lpsArr[j - 1];
std::cout << "Mismatch: shift pattern index j to " << j << "\n";
} else {
std::cout << "Mismatch at text[" << i << "] -> '" << text[i] <<
"' move i to " << i + 1 << "\n";
i++;
}
}
}
}
int main() {
std::string choice;
do {
std::string text, pattern;
std::cout << "Enter text: ";
std::cin >> text;
std::cout << "Enter pattern: ";
std::cin >> pattern;
kmp(text, pattern);
std::cout << "Do you want to search another pattern? (Yes/No): ";
std::cin >> choice;
} while(choice == "Yes" || choice == "yes");
}
