#include <iostream>
#include <string>
struct Edge {
char u, v;
int w;
};
int getIndex(char node_arr[], int n, char x) {
for (int i = 0; i < n; i++)
if (node_arr[i] == x) return i;
return -1;
}
void bellmanford(char nodes[], Edge edges[], int n, int e, char start, char
terminal) {
int INF = 1000000000;
int dist[n];
char parent[n];
for (int i = 0; i < n; i++) {
dist[i] = INF;
parent[i] = '-';
}
int startIndex = getIndex(nodes, n, start);
dist[startIndex] = 0;
for (int k = 1; k <= n - 1; k++) {
for (int i = 0; i < e; i++) {
int u = getIndex(nodes, n, edges[i].u);
int v = getIndex(nodes, n, edges[i].v);
if (dist[u] != INF && dist[v] > dist[u] + edges[i].w) {
dist[v] = dist[u] + edges[i].w;
parent[v] = edges[i].u;
}
}
}
for (int i = 0; i < e; i++) {
int u = getIndex(nodes, n, edges[i].u);
int v = getIndex(nodes, n, edges[i].v);
if (dist[u] != INF && dist[v] > dist[u] + edges[i].w) {
std::cout << "\nERROR: Graph contains a NEGATIVE WEIGHT CYCLE.\n";
return;
}
}
std::cout << "\nAll distances from source (" << start << "):\n";
for (int i = 0; i < n; i++) std::cout << nodes[i] << " -> " << dist[i] <<
"\n";
std::cout << "\nShortest path from " << start << " to " << terminal << ":\n";
int termIndex = getIndex(nodes, n, terminal);
if (dist[termIndex] == INF) std::cout << "NO PATH EXISTS.\n";
else {
char path[n];
int path_len = 0;
char crawl = terminal;
while (crawl != '-') {
path[path_len++] = crawl;
crawl = parent[getIndex(nodes, n, crawl)];
}
for (int i = path_len - 1; i >= 0; i--) {
std::cout << path[i];
if (i != 0) std::cout << " -> ";
}
std::cout << "\nTotal cost = " << dist[termIndex] << "\n";
}
}
int main() {
std::string choice;
do {
int n, e;
std::cout << "Enter the number of nodes : ";
std::cin >> n;
char nodes[n];
std::cout << "Enter the nodes : ";
for (int i = 0; i < n; i++) std::cin >> nodes[i];
std::cout << "Enter the number of edges : ";
std::cin >> e;
Edge edges[e];
std::cout << "Enter the edges (u v w):\n";
for (int i = 0; i < e; i++) std::cin >> edges[i].u >> edges[i].v >>
edges[i].w;
char start, terminal;
std::cout << "Enter starting node : ";
std::cin >> start;
std::cout << "Enter terminal node : ";
std::cin >> terminal;
bellmanford(nodes, edges, n, e, start, terminal);
std::cout << "\nDo you want to continue (Yes/No): ";
std::cin >> choice;
} while (choice == "Yes" || choice == "yes");
return 0;
}
